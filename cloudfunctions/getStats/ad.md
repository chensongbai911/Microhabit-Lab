# Microhabit Lab 页面级改造 Checklist（工程执行版）

> 使用方式：
>
> * 一页一页照着勾
> * 勾完一页再进下一页
> * 不允许“顺手多做功能”

目标：**7 天内把项目打磨到「留存友好型 MVP」**

---

## 🏠 页面一：Home（今日页）✅ 最高优先级

### 🎯 页面唯一使命

> 用户 30 秒内完成一次打卡，并获得正反馈

---

### 必须完成（不做就不合格）

* [ ] Home 页面 **只展示今日相关数据**
* [ ] 今日完成率 / 进度是第一视觉焦点
* [ ] 每个习惯都有 **一键打卡按钮**（无二次确认）

---

### 数据层 Checklist

* [ ] Home **不自己计算** progress
* [ ] 所有数据来自 `getTodayHabits`
* [ ] data 结构固定为：

```js
{
  habitsToday,
  completedCount,
  totalCount,
  progress
}
```

---

### 打卡交互 Checklist（极其重要）

* [ ] 点击后 **立即更新 UI（乐观更新）**
* [ ] 网络慢时 UI 不阻塞
* [ ] 打卡失败可回滚，但不影响用户体验
* [ ] 打卡成功有以下至少 2 个反馈：

  * [ ] 视觉变化（✔ / 进度变化）
  * [ ] 文案反馈（随机 3–5 条）

---

### 禁止事项（出现即失败）

* [ ] ❌ Home 出现历史数据
* [ ] ❌ Home 出现复杂设置入口
* [ ] ❌ Home 页面可滑动很长

---

## ➕ 页面二：Create Habit（新建习惯）

### 🎯 页面使命

> 让用户“几乎不需要思考”就能创建

---

### 创建流程 Checklist

* [ ] 创建流程 ≤ 2 步
* [ ] 默认值已填好（用户只需确认）
* [ ] 默认 `targetTimes = 1`

---

### 交互 Checklist

* [ ] 支持模板一键创建
* [ ] 创建成功后 **直接返回 Home**
* [ ] Home 能立刻看到新习惯

---

### 禁止事项

* [ ] ❌ 强迫填写太多字段
* [ ] ❌ 创建成功页（多余）

---

## 📋 页面三：Habits（我的习惯 / 模板）

### 🎯 页面使命

> 管理长期习惯资产（低频页）

---

### 必须完成

* [ ] 区分「我的习惯」/「模板库」
* [ ] 模板全部是“极微习惯”
* [ ] 模板默认参数合理（1 次 / 天）

---

### 数据 Checklist

* [ ] 不显示今日完成状态
* [ ] 不和 Home 状态产生耦合

---

### 禁止事项

* [ ] ❌ 模板目标设置过大
* [ ] ❌ 页面承担打卡功能

---

## 📌 页面四：Habit Detail（习惯详情）

### 🎯 页面使命

> 给理性用户安全感，而不是制造压力

---

### 展示 Checklist

* [ ] 展示 streak（连续天数）
* [ ] 历史展示 ≤ 14 天
* [ ] 历史以格子/周视图呈现

---

### 禁止事项

* [ ] ❌ 展示失败次数
* [ ] ❌ 红色警告 / 惩罚性文案

---

## 📊 页面五：Stats（统计页）

### 🎯 页面使命

> 3 秒告诉用户：你在变好

---

### 数据 Checklist

* [ ] getStats 返回“结论型数据”
* [ ] 本周完成率
* [ ] 最稳定习惯

---

### 展示 Checklist

* [ ] 文案 > 图表
* [ ] 图表只是辅助

---

### 禁止事项

* [ ] ❌ 原始日志列表
* [ ] ❌ 复杂报表

---

## ☁️ 云函数通用 Checklist（全局）

### 必须满足

* [ ] 所有云函数返回结构稳定
* [ ] logHabit / createHabit 幂等
* [ ] 网络失败不产生脏数据

---

### 数据一致性

* [ ] 打卡 → Home 即时更新
* [ ] 返回 / 重进数据一致

---

## 🚀 推荐执行顺序（照着来）

1️⃣ Home 打卡体验
2️⃣ getTodayHabits 数据下沉
3️⃣ streak 后端统一
4️⃣ Create Habit 极简化
5️⃣ Stats 改结论优先

---

## ✅ 完成标准（你可以自测）

* 连续 3 天使用
* 有 1 天忘记，也愿意回来
* 没有一次觉得“麻烦”

如果这 3 条成立，这个项目就**已经成功了一半**。

---

